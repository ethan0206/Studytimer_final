<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Study Timetable</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    height: 100vh;
  }
  #left {
    width: 30%;
    background: #111;
    color: white;
    padding: 20px;
  }
  #left h2 {
    margin-top: 0;
    letter-spacing: 2px;
  }
  .item {
    margin: 10px 0;
    opacity: 0.4;
  }
  .active {
    opacity: 1;
    font-weight: bold;
  }
  #right {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: #f5f5f5;
  }
  #time {
    font-size: 64px;
    margin-bottom: 20px;
  }
  button {
    font-size: 18px;
    padding: 10px 20px;
  }
</style>
</head>

<body>

<div id="left">
  <h2>TIMETABLE</h2>
  <div id="schedule"></div>
</div>

<div id="right">
  <div id="time">--:--:--</div>
  <button onclick="enableSound()">ðŸ”” ì¢…ì†Œë¦¬ í…ŒìŠ¤íŠ¸</button>
</div>

<script>
/* ====== ì‚¬ìš´ë“œ ====== */
let audioCtx;
let soundEnabled = false;

function enableSound() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  playMelody();
  soundEnabled = true;
  alert("ì¢…ì†Œë¦¬ í™œì„±í™” ì™„ë£Œ");
}

/* ðŸŽµ ë¹ ë¥¸ í…œí¬ ë ˆìž¥ì¡° ì¢… ë©œë¡œë”” */
const melody = [
  293.66, 369.99, 440.00, 369.99,
  293.66, 369.99, 440.00, 587.33,
  587.33, 554.37, 493.88, 440.00,
  392.00, 369.99, 329.63, 293.66,
  293.66, 554.37, 293.66
];

function playMelody() {
  if (!audioCtx) return;
  let t = audioCtx.currentTime;

  melody.forEach(freq => {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = "triangle"; // ì¢… ëŠë‚Œ
    osc.frequency.value = freq;

    gain.gain.setValueAtTime(0.3, t);
    gain.gain.exponentialRampToValueAtTime(0.001, t + 0.18);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(t);
    osc.stop(t + 0.18);

    t += 0.22; // ðŸ”¥ ë¹ ë¥¸ í…œí¬
  });
}

/* ====== ì‹œê°„í‘œ ====== */
const timetable = [
  { name: "1êµì‹œ", start: "08:40", end: "10:00" },
  { name: "ì‰¬ëŠ”ì‹œê°„", start: "10:00", end: "10:20" },
  { name: "2êµì‹œ", start: "10:20", end: "11:40" },
  { name: "ì ì‹¬", start: "11:40", end: "12:40" },
  { name: "3êµì‹œ", start: "12:40", end: "14:00" },
  { name: "ì‰¬ëŠ”ì‹œê°„", start: "14:00", end: "14:20" },
  { name: "4êµì‹œ", start: "14:20", end: "15:30" }
];

function tick() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,"0");
  const m = String(now.getMinutes()).padStart(2,"0");
  const s = String(now.getSeconds()).padStart(2,"0");
  const hm = `${h}:${m}`;

  document.getElementById("time").innerText = `${h}:${m}:${s}`;

  const box = document.getElementById("schedule");
  box.innerHTML = "";

  timetable.forEach(t => {
    const div = document.createElement("div");
    div.className = "item";
    if (hm >= t.start && hm < t.end) div.classList.add("active");
    div.textContent = `${t.name} ${t.start}â€“${t.end}`;
    box.appendChild(div);

    if (soundEnabled && s === "00" && hm === t.start) {
      playMelody();
    }
  });
}

setInterval(tick, 1000);
</script>

</body>
</html>
