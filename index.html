<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í•™êµ íƒ€ì´ë¨¸ (ì‹¤ì‹œê°„ ì—°ë™)</title>
<style>
body {
    margin: 0;
    background: #0b132b;
    color: white;
    font-family: 'Arial', sans-serif;
    text-align: center;
}
#container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100vh;
}
#title {
    font-size: 40px;
    margin-bottom: 10px;
}
#now {
    font-size: 28px;
    margin-bottom: 10px;
    color: #ffd166;
}
#timeInfo {
    font-size: 26px;
    margin-bottom: 15px;
    color: #cfd8ff;
}
#status {
    font-size: 50px;
    margin-bottom: 10px;
}
#timer {
    font-size: 120px;
    font-weight: bold;
}
</style>
</head>
<body>

<div id="container">
    <div id="title">ğŸ“š í•™êµ ì‹¤ì‹œê°„ íƒ€ì´ë¨¸</div>
    <div id="now">í˜„ì¬ ì‹œê°: --:--:--</div>
    <div id="timeInfo">ë‹¤ìŒ ì¼ì • ëŒ€ê¸° ì¤‘</div>
    <div id="status">ëŒ€ê¸° ì¤‘</div>
    <div id="timer">--:--</div>
</div>

<!-- í•™êµ ì¢…ì†Œë¦¬ -->
<audio id="bell" src="https://actions.google.com/sounds/v1/alarms/school_bell.ogg"></audio>

<script>
const schedule = [
    {name: "1êµì‹œ", start:"08:40", end:"10:00"},
    {name: "ì‰¬ëŠ”ì‹œê°„", start:"10:00", end:"10:20"},
    {name: "2êµì‹œ", start:"10:20", end:"11:40"},
    {name: "ì ì‹¬", start:"11:40", end:"12:40"},
    {name: "3êµì‹œ", start:"12:40", end:"14:00"},
    {name: "ì‰¬ëŠ”ì‹œê°„", start:"14:00", end:"14:20"},
    {name: "4êµì‹œ", start:"14:20", end:"15:30"}
];

let lastRung = ""; // ë§ˆì§€ë§‰ìœ¼ë¡œ ìš¸ë¦° ì‹œê°„ ì €ì¥

function toMinutes(t){
    const [h,m] = t.split(":").map(Number);
    return h*60 + m;
}

function updateClock(){
    const now = new Date();
    const h = String(now.getHours()).padStart(2,'0');
    const m = String(now.getMinutes()).padStart(2,'0');
    const s = String(now.getSeconds()).padStart(2,'0');

    document.getElementById("now").innerText = 
        `í˜„ì¬ ì‹œê°: ${h}:${m}:${s}`;

    const nowMin = now.getHours()*60 + now.getMinutes();
    let current = null;
    let next = null;

    for(let i=0;i<schedule.length;i++){
        const start = toMinutes(schedule[i].start);
        const end = toMinutes(schedule[i].end);

        if(nowMin >= start && nowMin < end){
            current = schedule[i];
            next = schedule[i+1] || null;
            break;
        }
        if(nowMin < start){
            next = schedule[i];
            break;
        }
    }

    if(current){
        document.getElementById("status").innerText = current.name;

        const endMin = toMinutes(current.end);
        let remain = (endMin - nowMin)*60 - now.getSeconds();
        if(remain < 0) remain = 0;

        let min = Math.floor(remain/60);
        let sec = remain % 60;
        document.getElementById("timer").innerText =
            `${String(min).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;

        document.getElementById("timeInfo").innerText =
            `ì‹œì‘: ${current.start} â†’ ì¢…ë£Œ: ${current.end}`;

        // ğŸ”” ì¢…ë£Œ ì‹œê°ì— ì •í™•íˆ ì¢… ìš¸ë¦¬ê¸°
        if(nowMin === endMin && lastRung !== current.end){
            document.getElementById("bell").play();
            lastRung = current.end;
        }

    } else if(next){
        document.getElementById("status").innerText = "ëŒ€ê¸° ì¤‘";
        document.getElementById("timer").innerText = "--:--";
        document.getElementById("timeInfo").innerText =
            `ë‹¤ìŒ: ${next.name} (${next.start} ì‹œì‘)`;

        // ğŸ”” ì‹œì‘ ì‹œê°ì—ë„ ì¢… ìš¸ë¦¬ê¸°
        if(nowMin === toMinutes(next.start) && lastRung !== next.start){
            document.getElementById("bell").play();
            lastRung = next.start;
        }

    } else {
        document.getElementById("status").innerText = "ëª¨ë“  ì¼ì • ì¢…ë£Œ ğŸ‰";
        document.getElementById("timer").innerText = "--:--";
        document.getElementById("timeInfo").innerText = "ì˜¤ëŠ˜ ì¼ì • ì™„ë£Œ";
    }
}

// 1ì´ˆë§ˆë‹¤ ê°±ì‹ 
setInterval(updateClock, 1000);
updateClock();
</script>

</body>
</html>
